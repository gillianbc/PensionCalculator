<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>Pension Strategy Comparison (Browser)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="stylesheet" href="styles.css?v=1.0.3"/>
</head>
<body>
<div class="app-container">
    <header>
        <h1>Pension Strategy Comparison</h1>
        <p>Gillian's fabulous pension calculator - I have done my best to calculate this correctly, but no
            guarantees.</p>
        <ul>
            <li>Does someone need to wait until state pension is due or do they have enough now to retire early without running out of money?</li>
            <li>How much will they be able to safely spend each year?</li>
            <li>Is it better to take a 25% tax free lump sum?</li>
            <li>Is it better to use up savings first and leave pension untouched?</li>
            <li>Is it better to use pensions first and leave savings untouched?</li>
            <li>Is it better to drawdown from pension, but no more than the income tax threshold (currently 12570), plus spend some from savings?</li>
            <li>Is it better to drawdown from pension within basic rate threshold (currently 37700)?</li>
            <li>Even when you have no income and drawing from pension, you're allowed to pay in 3600 gross (2,880 from savings, 720 tax rebate) if you are under 75 (no rebate after that).  Is it worth it?</li>
            <li>What will be the long-term effects if I need a few adhoc withdrawals e.g. for a new car, a major repair, a new bathroom, an expensive holiday</li>
            <li>What effect will different growth rates have?</li>
        </ul>

        <p>Enter your parameters and generate a comparison report.</p>
        <p>Press Ctrl-Shift-R to ensure you are using the latest version of this app</p>
        <p>The report shows your total wealth at the end of the year i.e. your savings plus your pension pot.
            If you have run out of pensions and savings, you will only have your state pension to live on</p>
        <br>
        <p>Hover over a value in the report to see the split between savings and pension</p>
        <p>Hover over each strategy label for a description</p>
    </header>

    <section class="card">
        <h2>Inputs</h2>
        <form id="inputs-form">
            <div class="grid-2">
                <div class="form-group">
                    <label for="initialSavings">
                        Initial Savings (£)
                        <span class="tooltip-container">
                            <span class="help-icon">?</span>
                            <span class="tooltip">Enter your total savings amount in pounds. i.e. current accounts, ISAs, savings accounts, premium bonds</span>
                        </span>
                    </label>
                    <input id="initialSavings" type="text" inputmode="decimal" placeholder="74000.00" value="100000"/>
                </div>
                <div class="form-group">
                    <label for="initialPension">
                        Initial Pension (£)
                        <span class="tooltip-container">
                            <span class="help-icon">?</span>
                            <span class="tooltip">Enter the total you have in your pension pots in £</span>
                        </span>
                    </label>
                    <input id="initialPension" type="text" inputmode="decimal" placeholder="425000.00" value="500000"/>
                </div>
            </div>

            <div class="grid-2">
                <div class="form-group">
                    <label for="spendingAmounts">
                        Example Annual Spending Amounts (£, comma separated)
                        <span class="tooltip-container">
                            <span class="help-icon">?</span>
                            <span class="tooltip">How much do you spend a year now?  How much might you spend when retired? Each spending amount is shown as a column in the report</span>
                        </span>
                    </label>
                    <input id="spendingAmounts" type="text" placeholder="20000.00, 23000.00, 26000.00"
                           value="20000, 25000, 30000, 35000"/>
                </div>
                <div class="form-group">
                    <label for="targetAges">
                        Target Ages (comma separated, optional)
                        <span class="tooltip-container">
                            <span class="help-icon">?</span>
                            <span class="tooltip">The first age entered is the start age for the calculations i.e. the age you are when you start using your savings and pension.  This controls the blocks that will appear in the report. </span>
                        </span>
                    </label>
                    <input id="targetAges" type="text" placeholder="67, 75, 99" value="61, 67, 75, 80, 85, 90, 95, 99"/>
                </div>
            </div>

            <div class="form-group">
                <label>
                    Ad hoc withdrawals (optional)
                    <span class="tooltip-container">
                        <span class="help-icon">?</span>
                        <span class="tooltip">Add any extra net spending in specific years, such as lump sums for a new car or holiday. Click 'Add' for each withdrawal. Use 'Remove' to delete a row.</span>
                    </span>
                </label>
                <div id="adhocWithdrawalsSection" style="margin-top:6px;">
                    <div id="adhocRows"></div>
                    <div style="margin-top:8px; display:flex; gap:8px; align-items:center;">
                        <span style="font-weight:600;">At age</span>
                        <input type="number" min="0" max="120" id="adhocAge" placeholder="Age" style="width:110px;">
                        <span style="font-weight:600;">lump sum</span>
                        <input type="number" min="0" id="adhocAmount" placeholder="Amount (£)" style="width:110px;">
                        <button type="button" id="addAdhocBtn" style="margin-left:6px;">Add</button>
                    </div>
                    <div style="color:#888; font-size:0.98em; margin-top:5px;">
                        Example: age 62, £5000. Add as many pairs as needed. Withdrawals are added to annual net spending for those years.
                    </div>
                </div>
            </div>

            <details class="advanced">
                <summary>Advanced Parameters</summary>
                <div class="grid-3">
                    <div class="form-group">
                        <label for="pensionGrowthRate">
                            Pension Growth Rate (decimal)
                            <span class="tooltip-container">
                                <span class="help-icon">?</span>
                                <span class="tooltip">e.g. if you expect to get 4% above inflation, enter 0.04</span>
                            </span>
                        </label>
                        <input id="pensionGrowthRate" type="text" inputmode="decimal" value="0.04"/>
                    </div>

                    <div class="form-group">
                        <label for="personalAllowance">
                            Personal Allowance (£)
                            <span class="tooltip-container">
                                <span class="help-icon">?</span>
                                <span class="tooltip">In 2025, the threshold before you start paying income tax is £12570</span>
                            </span>
                        </label>
                        <input id="personalAllowance" type="text" inputmode="decimal" value="12570.00"/>
                    </div>
                    <div class="form-group">
                        <label for="statePension">
                            State Pension (£/yr)
                            <span class="tooltip-container">
                                <span class="help-icon">?</span>
                                <span class="tooltip">In 2025, the full state pension is £11973</span>
                            </span>
                        </label>
                        <input id="statePension" type="text" inputmode="decimal" value="11973.00"/>
                    </div>
                    <div class="form-group">
                        <label for="basicRate">Basic Rate (decimal)</label>
                        <input id="basicRate" type="text" inputmode="decimal" value="0.20"/>
                    </div>

                    <div class="form-group">
                        <label for="basicRateBand">
                            Basic Rate Band Width (£)
                            <span class="tooltip-container">
                                <span class="help-icon">?</span>
                                <span class="tooltip">In 2025, you pay nothing on the first £12570 then 20% on the next £37700</span>
                            </span>
                        </label>
                        <input id="basicRateBand" type="text" inputmode="decimal" value="37700.00"/>
                    </div>
                    <div class="form-group">
                        <label for="noIncomeContributionLimit">
                            No-income Contribution Limit (£ gross)
                            <span class="tooltip-container">
                                <span class="help-icon">?</span>
                                <span class="tooltip">When you're drawing down your pension, you can still add into it from savings.  The limit is 100% of earnings up to 60K, but if you have zero income, you can pay in £3600 gross
                                    i.e. £2880 from you and £720 governent rebate</span>
                            </span>
                        </label>
                        <input id="noIncomeContributionLimit" type="text" inputmode="decimal" value="3600.00"/>
                    </div>

                    <div class="form-group">
                        <label for="statePensionAge">
                            State Pension Age
                            <span class="tooltip-container">
                                <span class="help-icon">?</span>
                                <span class="tooltip">The age at which you are eligible to draw your State Pension. Default is 67. You can set any age from 65 to 80.</span>
                            </span>
                        </label>
                        <input id="statePensionAge" type="number" min="65" max="80" value="67" />
                    </div>

                </div>
            </details>

            <div class="actions">
                <button type="button" id="generateBtn" class="btn primary">Generate Report</button>
                <button type="button" id="downloadBtn" class="btn">Download HTML</button>
            </div>
        </form>
    </section>

    <section class="card">
        <h2>Report</h2>
        <div id="report"></div>
    </section>
</div>

<script src="app.js"></script>Fz
</body>
</html>
